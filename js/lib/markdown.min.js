!function(e){function t(){return"Markdown.mk_block( "+uneval(this.toString())+", "+uneval(this.trailing)+", "+uneval(this.lineNumber)+" )"}function r(){var e=require("util");return"Markdown.mk_block( "+e.inspect(this.toString())+", "+e.inspect(this.trailing)+", "+e.inspect(this.lineNumber)+" )"}function n(e){return e.split("\n").length-1}function i(e){return e&&e.length>0?e.replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;").replace(/'/g,"&#39;"):""}function a(e){if("string"==typeof e)return i(e);var t=e.shift(),r={},n=[];for(!e.length||"object"!=typeof e[0]||e[0]instanceof Array||(r=e.shift());e.length;)n.push(a(e.shift()));var s="";"undefined"!=typeof r.src&&(s+=' src="'+i(r.src)+'"',delete r.src);for(var l in r){var h=i(r[l]);h&&h.length&&(s+=" "+l+'="'+h+'"')}return"img"===t||"br"===t||"hr"===t?"<"+t+s+"/>":"<"+t+s+">"+n.join("")+"</"+t+">"}function s(e,t,r){var n;r=r||{};var i=e.slice(0);"function"==typeof r.preprocessTreeNode&&(i=r.preprocessTreeNode(i,t));var a=y(i);if(a){i[1]={};for(n in a)i[1][n]=a[n];a=i[1]}if("string"==typeof i)return i;switch(i[0]){case"header":i[0]="h"+i[1].level,delete i[1].level;break;case"bulletlist":i[0]="ul";break;case"numberlist":i[0]="ol";break;case"listitem":i[0]="li";break;case"para":i[0]="p";break;case"markdown":i[0]="html",a&&delete a.references;break;case"code_block":i[0]="pre",n=a?2:1;var l=["code"];l.push.apply(l,i.splice(n,i.length-n)),i[n]=l;break;case"uchen_block":i[0]="p",n=a?2:1;for(var h=i.splice(n,i.length-n)[0],u=0;u<h.length;u++)i.push(h[u]);break;case"uchen_syllable":i[0]="span";break;case"uchen_wylie":i[0]="span";break;case"uchen_english":i[0]="span";break;case"uchen_phonetics":i[0]="span";break;case"uchen":i[0]="span";break;case"inlinecode":i[0]="code";break;case"img":i[1].src=i[1].href,delete i[1].href;break;case"linebreak":i[0]="br";break;case"link":i[0]="a";break;case"link_ref":i[0]="a";var c=t[a.ref];if(!c)return a.original;delete a.ref,a.href=c.href,c.title&&(a.title=c.title),delete a.original;break;case"img_ref":i[0]="img";var c=t[a.ref];if(!c)return a.original;delete a.ref,a.src=c.href,c.title&&(a.title=c.title),delete a.original}if(n=1,a){for(var o in i[1]){n=2;break}1===n&&i.splice(n,1)}for(;n<i.length;++n)i[n]=s(i[n],t,r);return i}function l(e){for(var t=y(e)?2:1;t<e.length;)"string"==typeof e[t]?t+1<e.length&&"string"==typeof e[t+1]?e[t]+=e.splice(t+1,1)[0]:++t:(l(e[t]),++t)}function h(e,t){function r(e){this.len_after=e,this.name="close_"+t}var n=e+"_state",i="strong"===e?"em_state":"strong_state";return function(a){if(this[n][0]===t)return this[n].shift(),[a.length,new r(a.length-t.length)];var s=this[i].slice(),l=this[n].slice();this[n].unshift(t);var h=this.processInline(a.substr(t.length)),u=h[h.length-1];this[n].shift();if(u instanceof r){h.pop();var c=a.length-u.len_after;return[c,[e].concat(h)]}return this[i]=s,this[n]=l,[t.length,t]}}function u(){y(this.tree)||this.tree.splice(1,0,{});var e=y(this.tree);return void 0===e.references&&(e.references={}),e}function c(e,t){t[2]&&"<"===t[2][0]&&">"===t[2][t[2].length-1]&&(t[2]=t[2].substring(1,t[2].length-1));var r=e.references[t[1].toLowerCase()]={href:t[2]};void 0!==t[4]?r.title=t[4]:void 0!==t[5]&&(r.title=t[5])}function o(e){for(var t=e.split(""),r=[""],n=!1;t.length;){var i=t.shift();switch(i){case" ":n?r[r.length-1]+=i:r.push("");break;case"'":case'"':n=!n;break;case"\\":i=t.shift();default:r[r.length-1]+=i}}return r}function g(e){return e.replace(/([.*+?^=!:${}()|\[\]\/\\])/g,"\\$1")}function f(e,t,r){return e.replace(new RegExp(g(t),"g"),r)}function p(e){return e.replace(/(_|\*|\/|(\/\/)|;|\||\!|\:|£|==|=|x|(x\.)|(\.\.\.\.)|(o\.\.\.\.)|(H1)|(H2)|(H3)|@|#|\$|%|(H4)|(H5)|(H6)|(H7)|<|>|\{|\}|_)/g,"")}function d(e){return e.trim().match(/(_|\*|\/|(\/\/)|;|\||\!|\:|£|==|=|x|(x\.)|(\.\.\.\.)|(o\.\.\.\.)|(H1)|(H2)|(H3)|@|#|\$|%|(H4)|(H5)|(H6)|(H7)|<|>|\{|\}|_)$/g,"")}var v={};v.mk_block=function(e,n,i){1===arguments.length&&(n="\n\n");var a=new String(e);return a.trailing=n,a.inspect=r,a.toSource=t,void 0!==i&&(a.lineNumber=i),a};var b=v.isArray=Array.isArray||function(e){return"[object Array]"===Object.prototype.toString.call(e)};Array.prototype.forEach?v.forEach=function(e,t,r){return e.forEach(t,r)}:v.forEach=function(e,t,r){for(var n=0;n<e.length;n++)t.call(r||e,e[n],n,e)},v.isEmpty=function(e){for(var t in e)if(hasOwnProperty.call(e,t))return!1;return!0},v.extract_attr=function(e){return b(e)&&e.length>1&&"object"==typeof e[1]&&!b(e[1])?e[1]:void 0};var k=function(e){switch(typeof e){case"undefined":this.dialect=k.dialects.Gruber;break;case"object":this.dialect=e;break;default:if(!(e in k.dialects))throw new Error("Unknown Markdown dialect '"+String(e)+"'");this.dialect=k.dialects[e]}this.em_state=[],this.strong_state=[],this.debug_indent=""};k.dialects={};var _=k.mk_block=v.mk_block,b=v.isArray;k.parse=function(e,t){var r=new k(t);return r.toTree(e)},k.prototype.split_blocks=function(e){e=e.replace(/\r\n?/g,"\n");var t,r=/([\s\S]+?)($|\n#|\n(?:\s*\n|$)+)/g,i=[],a=1;for(null!==(t=/^(\s*\n)/.exec(e))&&(a+=n(t[0]),r.lastIndex=t[0].length);null!==(t=r.exec(e));)"\n#"===t[2]&&(t[2]="\n",r.lastIndex--),i.push(_(t[1],t[2],a)),a+=n(t[0]);return i},k.prototype.processBlock=function(e,t){var r=this.dialect.block,n=r.__order__;if("__call__"in r)return r.__call__.call(this,e,t);for(var i=0;i<n.length;i++){var a=r[n[i]].call(this,e,t);if(a)return(!b(a)||a.length>0&&!b(a[0])&&"string"!=typeof a[0])&&this.debug(n[i],"didn't return proper JsonML"),a}return[]},k.prototype.processInline=function(e){return this.dialect.inline.__call__.call(this,String(e))},k.prototype.toTree=function(e,t){var r=e instanceof Array?e:this.split_blocks(e),n=this.tree;try{for(this.tree=t||this.tree||["markdown"];r.length;){var i=this.processBlock(r.shift(),r);i.length&&this.tree.push.apply(this.tree,i)}return this.tree}finally{t&&(this.tree=n)}},k.prototype.debug=function(){var e=Array.prototype.slice.call(arguments);e.unshift(this.debug_indent),"undefined"!=typeof print&&print.apply(print,e),"undefined"!=typeof console&&"undefined"!=typeof console.log&&console.log.apply(null,e)},k.prototype.loop_re_over_block=function(e,t,r){for(var n,i=t.valueOf();i.length&&null!==(n=e.exec(i));)i=i.substr(n[0].length),r.call(this,n);return i},k.buildBlockOrder=function(e){var t=[];for(var r in e)"__order__"!==r&&"__call__"!==r&&t.push(r);e.__order__=t},k.buildInlinePatterns=function(e){var t=[];for(var r in e)if(!r.match(/^__.*__$/)){var n=r.replace(/([\\.*+?^$|()\[\]{}])/g,"\\$1").replace(/\n/,"\\n");t.push(1===r.length?n:"(?:"+n+")")}t=t.join("|"),e.__patterns__=t;var i=e.__call__;e.__call__=function(e,r){return void 0!==r?i.call(this,e,r):i.call(this,e,t)}};var y=v.extract_attr;k.renderJsonML=function(e,t){t=t||{},t.root=t.root||!1,e=JSON.parse(JSON.stringify(e));var r=[];if(t.root)r.push(a(e));else for(e.shift(),!e.length||"object"!=typeof e[0]||e[0]instanceof Array||e.shift();e.length;)r.push(a(e.shift()));return r.join("\n\n")},k.toHTMLTree=function(e,t,r){"string"==typeof e&&(e=this.parse(e,t));var n=y(e),i={};n&&n.references&&(i=n.references);var a=s(e,i,r);return l(a),a},k.toHTML=function(e,t,r){var n=this.toHTMLTree(e,t,r);return this.renderJsonML(n)};var L={};L.inline_until_char=function(e,t){for(var r=0,n=[];;){if(e.charAt(r)===t)return r++,[r,n];if(r>=e.length)return[r,null,n];var i=this.dialect.inline.__oneElement__.call(this,e.substr(r));r+=i[0],n.push.apply(n,i.slice(1))}},L.subclassDialect=function(e){function t(){}function r(){}return t.prototype=e.block,r.prototype=e.inline,{block:new t,inline:new r}};var m=v.forEach,y=v.extract_attr,_=v.mk_block,w=v.isEmpty,x=L.inline_until_char,$=/(?:(?:https?|ftp):\/\/)(?:\S+(?::\S*)?@)?(?:(?!(?:10|127)(?:\.\d{1,3}){3})(?!(?:169\.254|192\.168)(?:\.\d{1,3}){2})(?!172\.(?:1[6-9]|2\d|3[0-1])(?:\.\d{1,3}){2})(?:[1-9]\d?|1\d\d|2[01]\d|22[0-3])(?:\.(?:1?\d{1,2}|2[0-4]\d|25[0-5])){2}(?:\.(?:[1-9]\d?|1\d\d|2[0-4]\d|25[0-4]))|(?:(?:[a-z\u00a1-\uffff0-9]-*)*[a-z\u00a1-\uffff0-9]+)(?:\.(?:[a-z\u00a1-\uffff0-9]+-?)*[a-z\u00a1-\uffff0-9]+)*(?:\.(?:[a-z\u00a1-\uffff]{2,})))(?::\d{2,5})?(?:\/[^\s]*)?/i.source,z={block:{atxHeader:function(e,t){var r=e.match(/^(#{1,6})\s*(.*?)\s*#*\s*(?:\n|$)/);if(r){var n=["header",{level:r[1].length}];return Array.prototype.push.apply(n,this.processInline(r[2])),r[0].length<e.length&&t.unshift(_(e.substr(r[0].length),e.trailing,e.lineNumber+2)),[n]}},setextHeader:function(e,t){var r=e.match(/^(.*)\n([-=])\2\2+(?:\n|$)/);if(r){var n="="===r[2]?1:2,i=["header",{level:n}].concat(this.processInline(r[1]));return r[0].length<e.length&&t.unshift(_(e.substr(r[0].length),e.trailing,e.lineNumber+2)),[i]}},code:function(e,t){var r=[],n=/^(?: {0,3}\t| {4})(.*)\n?/;if(e.match(n)){e:for(;;){var i=this.loop_re_over_block(n,e.valueOf(),function(e){r.push(e[1])});if(i.length){t.unshift(_(i,e.trailing));break e}if(!t.length)break e;if(!t[0].match(n))break e;r.push(e.trailing.replace(/[^\n]/g,"").substring(2)),e=t.shift()}return[["code_block",r.join("\n")]]}},horizRule:function(e,t){var r=e.match(/^(?:([\s\S]*?)\n)?[ \t]*([-_*])(?:[ \t]*\2){2,}[ \t]*(?:\n([\s\S]*))?$/);if(r){var n=[["hr"]];if(r[1]){var i=_(r[1],"",e.lineNumber);n.unshift.apply(n,this.toTree(i,[]))}return r[3]&&t.unshift(_(r[3],e.trailing,e.lineNumber+1)),n}},lists:function(){function e(e){return new RegExp("(?:^("+h+"{0,"+e+"} {0,3})("+a+")\\s+)|(^"+h+"{0,"+(e-1)+"}[ ]{0,4})")}function t(e){return e.replace(/ {0,3}\t/g,"    ")}function r(e,t,r,n){if(t)return void e.push(["para"].concat(r));var i=e[e.length-1]instanceof Array&&"para"===e[e.length-1][0]?e[e.length-1]:e;n&&e.length>1&&r.unshift(n);for(var a=0;a<r.length;a++){var s=r[a],l="string"==typeof s;l&&i.length>1&&"string"==typeof i[i.length-1]?i[i.length-1]+=s:i.push(s)}}function n(e,t){for(var r=new RegExp("^("+h+"{"+e+"}.*?\\n?)*$"),n=new RegExp("^"+h+"{"+e+"}","gm"),i=[];t.length>0&&r.exec(t[0]);){var a=t.shift(),s=a.replace(n,"");i.push(_(s,a.trailing,a.lineNumber))}return i}function i(e,t,r){var n=e.list,i=n[n.length-1];if(!(i[1]instanceof Array&&"para"===i[1][0]))if(t+1===r.length)i.push(["para"].concat(i.splice(1,i.length-1)));else{var a=i.pop();i.push(["para"].concat(i.splice(1,i.length-1)),a)}}var a="[*+-]|\\d+\\.",s=/[*+-]/,l=new RegExp("^( {0,3})("+a+")[   ]+"),h="(?: {0,3}\\t| {4})";return function(a,h){function u(e){var t=s.exec(e[2])?["bulletlist"]:["numberlist"];return f.push({list:t,indent:e[1]}),t}var c=a.match(l);if(c){for(var o,g,f=[],p=u(c),d=!1,v=[f[0].list];;){for(var b=a.split(/(?=\n)/),k="",_="",y=0;y<b.length;y++){_="";var L=b[y].replace(/^\n/,function(e){return _=e,""}),w=e(f.length);if(c=L.match(w),void 0!==c[1]){k.length&&(r(o,d,this.processInline(k),_),d=!1,k=""),c[1]=t(c[1]);var x=Math.floor(c[1].length/4)+1;if(x>f.length)p=u(c),o.push(p),o=p[1]=["listitem"];else{var $=!1;for(g=0;g<f.length;g++)if(f[g].indent===c[1]){p=f[g].list,f.splice(g+1,f.length-(g+1)),$=!0;break}$||(x++,x<=f.length?(f.splice(x,f.length-x),p=f[x-1].list):(p=u(c),o.push(p))),o=["listitem"],p.push(o)}_=""}L.length>c[0].length&&(k+=_+L.substr(c[0].length))}if(k.length){var z=this.processBlock(k,[]),S=z[0];S&&(S.shift(),z.splice.apply(z,[0,1].concat(S)),r(o,d,z,_),"\n"===o[o.length-1]&&o.pop(),d=!1,k="")}var H=n(f.length,h);H.length>0&&(m(f,i,this),o.push.apply(o,this.toTree(H,[])));var E=h[0]&&h[0].valueOf()||"";if(!E.match(l)&&!E.match(/^ /))break;a=h.shift();var M=this.dialect.block.horizRule.call(this,a,h);if(M){v.push.apply(v,M);break}f[f.length-1].indent===a.match(/^\s*/)[0]&&m(f,i,this),d=!0}return v}}}(),blockquote:function(e,t){var r=/(^|\n) +(\>[\s\S]*)/.exec(e);if(r&&r[2]&&r[2].length){var n=e.replace(/(^|\n) +\>/,"$1>");return t.unshift(n),[]}if(e.match(/^>/m)){var i=[];if(">"!==e[0]){for(var a=e.split(/\n/),s=[],l=e.lineNumber;a.length&&">"!==a[0][0];)s.push(a.shift()),l++;var h=_(s.join("\n"),"\n",e.lineNumber);i.push.apply(i,this.processBlock(h,[])),e=_(a.join("\n"),e.trailing,l)}for(;t.length&&">"===t[0][0];){var u=t.shift();e=_(e+e.trailing+u,u.trailing,e.lineNumber)}var c=e.replace(/^> ?/gm,""),o=(this.tree,this.toTree(c,["blockquote"])),g=y(o);return g&&g.references&&(delete g.references,w(g)&&o.splice(1,1)),i.push(o),i}},referenceDefn:function(e,t){var r=/^\s*\[([^\[\]]+)\]:\s*(\S+)(?:\s+(?:(['"])(.*)\3|\((.*?)\)))?\n?/;if(e.match(r)){var n=u.call(this),i=this.loop_re_over_block(r,e,function(e){c(n,e)});return i.length&&t.unshift(_(i,e.trailing)),[]}},para:function(e){return[["para"].concat(this.processInline(e))]}},inline:{__oneElement__:function(e,t,r){var n,i;t=t||this.dialect.inline.__patterns__;var a=new RegExp("([\\s\\S]*?)("+(t.source||t)+")");if(n=a.exec(e),!n)return[e.length,e];if(n[1])return[n[1].length,n[1]];var i;return n[2]in this.dialect.inline&&(i=this.dialect.inline[n[2]].call(this,e.substr(n.index),n,r||[])),i=i||[n[2].length,n[2]]},__call__:function(e,t){function r(e){"string"==typeof e&&"string"==typeof i[i.length-1]?i[i.length-1]+=e:i.push(e)}for(var n,i=[];e.length>0;)n=this.dialect.inline.__oneElement__.call(this,e,t,i),e=e.substr(n.shift()),m(n,r);return i},"]":function(){},"}":function(){},__escape__:/^\\[\\`\*_{}<>\[\]()#\+.!\-]/,"\\":function(e){return this.dialect.inline.__escape__.exec(e)?[2,e.charAt(1)]:[1,"\\"]},"![":function(e){if(!(e.indexOf("(")>=0&&-1===e.indexOf(")"))){var t=e.match(new RegExp("^!\\[(.*?)][ \\t]*\\(("+$+")\\)([ \\t])*([\"'].*[\"'])?"))||e.match(/^!\[(.*?)\][ \t]*\([ \t]*([^")]*?)(?:[ \t]+(["'])(.*?)\3)?[ \t]*\)/);if(t){t[2]&&"<"===t[2][0]&&">"===t[2][t[2].length-1]&&(t[2]=t[2].substring(1,t[2].length-1)),t[2]=this.dialect.inline.__call__.call(this,t[2],/\\/)[0];var r={alt:t[1],href:t[2]||""};return void 0!==t[4]&&(r.title=t[4]),[t[0].length,["img",r]]}return t=e.match(/^!\[(.*?)\][ \t]*\[(.*?)\]/),t?[t[0].length,["img_ref",{alt:t[1],ref:t[2].toLowerCase(),original:t[0]}]]:[2,"!["]}},"[":function T(e){for(var t=1,r=0;r<e.length;r++){var n=e.charAt(r);if("["===n&&t++,"]"===n&&t--,t>3)return[1,"["]}var i=String(e),a=x.call(this,e.substr(1),"]");if(!a[1])return[a[0]+1,e.charAt(0)].concat(a[2]);if(1===a[0])return[2,"[]"];var T,s,l=1+a[0],h=a[1];e=e.substr(l);var o=e.match(/^\s*\([ \t]*([^"']*)(?:[ \t]+(["'])(.*?)\2)?[ \t]*\)/);if(o){var g=o[1].replace(/\s+$/,"");if(l+=o[0].length,g&&"<"===g[0]&&">"===g[g.length-1]&&(g=g.substring(1,g.length-1)),!o[3])for(var f=1,p=0;p<g.length;p++)switch(g[p]){case"(":f++;break;case")":0===--f&&(l-=g.length-p,g=g.substring(0,p))}return g=this.dialect.inline.__call__.call(this,g,/\\/)[0],s={href:g||""},void 0!==o[3]&&(s.title=o[3]),T=["link",s].concat(h),[l,T]}if(o=e.match(new RegExp("^\\(("+$+")\\)")),o&&o[1])return l+=o[0].length,T=["link",{href:o[1]}].concat(h),[l,T];if(o=e.match(/^\s*\[(.*?)\]/),o&&(l+=o[0].length,s={ref:(o[1]||String(h)).toLowerCase(),original:i.substr(0,l)},h&&h.length>0))return T=["link_ref",s].concat(h),[l,T];if(o=i.match(/^\s*\[(.*?)\]:\s*(\S+)(?:\s+(?:(['"])(.*?)\3|\((.*?)\)))?\n?/)){var s=u.call(this);return c(s,o),[o[0].length]}if(1===h.length&&"string"==typeof h[0]){var d=h[0].toLowerCase().replace(/\s+/," ");return s={ref:d,original:i.substr(0,l)},T=["link_ref",s,h[0]],[l,T]}return[1,"["]},"<":function(e){var t;return null!==(t=e.match(/^<(?:((https?|ftp|mailto):[^>]+)|(.*?@.*?\.[a-zA-Z]+))>/))?t[3]?[t[0].length,["link",{href:"mailto:"+t[3]},t[3]]]:"mailto"===t[2]?[t[0].length,["link",{href:t[1]},t[1].substr("mailto:".length)]]:[t[0].length,["link",{href:t[1]},t[1]]]:[1,"<"]},"`":function(e){var t=e.match(/(`+)(([\s\S]*?)\1)/);return t&&t[2]?[t[1].length+t[2].length,["inlinecode",t[3]]]:[1,"`"]},"  \n":function(){return[3,["linebreak"]]}}};z.inline["**"]=h("strong","**"),z.inline.__=h("strong","__"),z.inline["*"]=h("em","*"),z.inline._=h("em","_"),k.dialects.Gruber=z,k.buildBlockOrder(k.dialects.Gruber.block),k.buildInlinePatterns(k.dialects.Gruber.inline);var S=L.subclassDialect(z),y=v.extract_attr,m=v.forEach;S.processMetaHash=function(e){for(var t=o(e),r={},n=0;n<t.length;++n)if(/^#/.test(t[n]))r.id=t[n].substring(1);else if(/^\./.test(t[n]))r["class"]?r["class"]=r["class"]+t[n].replace(/./," "):r["class"]=t[n].substring(1);else if(/\=/.test(t[n])){var i=t[n].split(/\=/);r[i[0]]=i[1]}return r},S.block.document_meta=function(e){if(!(e.lineNumber>1)&&e.match(/^(?:\w+:.*\n)*\w+:.*$/)){y(this.tree)||this.tree.splice(1,0,{});var t=e.split(/\n/);for(var r in t){var n=t[r].match(/(\w+):\s*(.*)$/),i=n[1].toLowerCase(),a=n[2];this.tree[1][i]=a}return[]}},S.block.block_meta=function(e){var t=e.match(/(^|\n) {0,3}\{:\s*((?:\\\}|[^\}])*)\s*\}$/);if(t){var r,n=this.dialect.processMetaHash(t[2]);if(""===t[1]){var i=this.tree[this.tree.length-1];if(r=y(i),"string"==typeof i)return;r||(r={},i.splice(1,0,r));for(var a in n)r[a]=n[a];return[]}var s=e.replace(/\n.*$/,""),l=this.processBlock(s,[]);r=y(l[0]),r||(r={},l[0].splice(1,0,r));for(var a in n)r[a]=n[a];return l}},S.block.definition_list=function(e,t){var r,n,i=/^((?:[^\s:].*\n)+):\s+([\s\S]+)$/,a=["dl"];if(n=e.match(i)){for(var s=[e];t.length&&i.exec(t[0]);)s.push(t.shift());for(var l=0;l<s.length;++l){var n=s[l].match(i),h=n[1].replace(/\n$/,"").split(/\n/),u=n[2].split(/\n:\s+/);for(r=0;r<h.length;++r)a.push(["dt",h[r]]);for(r=0;r<u.length;++r)a.push(["dd"].concat(this.processInline(u[r].replace(/(\n)\s+/,"$1"))))}return[a]}},S.block.table=function O(e){var t,r,n=function(e,t){t=t||"\\s",t.match(/^[\\|\[\]{}?*.+^$]$/)&&(t="\\"+t);for(var r,n=[],i=new RegExp("^((?:\\\\.|[^\\\\"+t+"])*)"+t+"(.*)");r=e.match(i);)n.push(r[1]),e=r[2];return n.push(e),n},i=/^ {0,3}\|(.+)\n {0,3}\|\s*([\-:]+[\-| :]*)\n((?:\s*\|.*(?:\n|$))*)(?=\n|$)/,a=/^ {0,3}(\S(?:\\.|[^\\|])*\|.*)\n {0,3}([\-:]+\s*\|[\-| :]*)\n((?:(?:\\.|[^\\|])*\|.*(?:\n|$))*)(?=\n|$)/;if(r=e.match(i))r[3]=r[3].replace(/^\s*\|/gm,"");else if(!(r=e.match(a)))return;var O=["table",["thead",["tr"]],["tbody"]];r[2]=r[2].replace(/\|\s*$/,"").split("|");var s=[];for(m(r[2],function(e){e.match(/^\s*-+:\s*$/)?s.push({align:"right"}):e.match(/^\s*:-+\s*$/)?s.push({align:"left"}):e.match(/^\s*:-+:\s*$/)?s.push({align:"center"}):s.push({})}),r[1]=n(r[1].replace(/\|\s*$/,""),"|"),t=0;t<r[1].length;t++)O[1][1].push(["th",s[t]||{}].concat(this.processInline(r[1][t].trim())));return m(r[3].replace(/\|\s*$/gm,"").split("\n"),function(e){var r=["tr"];for(e=n(e,"|"),t=0;t<e.length;t++)r.push(["td",s[t]||{}].concat(this.processInline(e[t].trim())));O[2].push(r)},this),[O]},S.inline["{:"]=function(e,t,r){if(!r.length)return[2,"{:"];var n=r[r.length-1];if("string"==typeof n)return[2,"{:"];var i=e.match(/^\{:\s*((?:\\\}|[^\}])*)\s*\}/);if(!i)return[2,"{:"];var a=this.dialect.processMetaHash(i[1]),s=y(n);s||(s={},n.splice(1,0,s));for(var l in a)s[l]=a[l];return[i[0].length,""]},k.dialects.Maruku=S,k.dialects.Maruku.inline.__escape__=/^\\[\\`\*_{}\[\]()#\+.!\-|:]/,k.buildBlockOrder(k.dialects.Maruku.block),k.buildInlinePatterns(k.dialects.Maruku.inline);var H=L.subclassDialect(z),m=v.forEach;H.block.hlcode=function(e,t){var r=/(```)(.*\n)(([\s\S\W\w\n\r]*?)\1)/,n=/(```)(.*\n)(([\s\S\W\w\n\r]*?))/,i=/(.*)(```$)/;if(e.match(n)){var a="",s="";if(e.match(r))a=e.match(r)[4],s=e.match(r)[2],s=s?s.indexOf("highlight")>=0?"nohighlight":s.replace(/\n/g,""):"";else{a="";for(var l=!1,h=e;t.length&&!l;)l=h.match(i),l||0!==h.indexOf("```")||(s=h.split("\n")[0].replace("```",""),s=s?s.indexOf("highlight")>=0?"nohighlight":s.replace(/\n/g,""):"",h=s.length?h.replace(s,""):h),a+=h.replace(/```/g,"")+(l?"":"\n\n"),h=l?"":t.shift()}return[["code_block",{"class":s},a]]}},H.block.table=function U(e){var t,r,n=function(e,t){t=t||"\\s",t.match(/^[\\|\[\]{}?*.+^$]$/)&&(t="\\"+t);for(var r,n=[],i=new RegExp("^((?:\\\\.|[^\\\\"+t+"])*)"+t+"(.*)");r=e.match(i);)n.push(r[1]),e=r[2];return n.push(e),n},i=/^ {0,3}\|(.+)\n {0,3}\|\s*([\-:]+[\-| :]*)\n((?:\s*\|.*(?:\n|$))*)(?=\n|$)/,a=/^ {0,3}(\S(?:\\.|[^\\|])*\|.*)\n {0,3}([\-:]+\s*\|[\-| :]*)\n((?:(?:\\.|[^\\|])*\|.*(?:\n|$))*)(?=\n|$)/;if(r=e.match(i))r[3]=r[3].replace(/^\s*\|/gm,"");else if(!(r=e.match(a)))return;var U=["table",["thead",["tr"]],["tbody"]];r[2]=r[2].replace(/\|\s*$/,"").split("|");var s=[];for(m(r[2],function(e){e.match(/^\s*-+:\s*$/)?s.push({align:"right"}):e.match(/^\s*:-+\s*$/)?s.push({align:"left"}):e.match(/^\s*:-+:\s*$/)?s.push({align:"center"}):s.push({})}),r[1]=n(r[1].replace(/\|\s*$/,""),"|"),t=0;t<r[1].length;t++)U[1][1].push(["th",s[t]||{}].concat(this.processInline(r[1][t].trim())));return m(r[3].replace(/\|\s*$/gm,"").split("\n"),function(e){var r=["tr"];for(e=n(e,"|"),t=0;t<e.length;t++)r.push(["td",s[t]||{}].concat(this.processInline(e[t].trim())));U[2].push(r)},this),[U]},k.dialects.ExtendedGruber=H,k.buildBlockOrder(k.dialects.ExtendedGruber.block);var E={};E.k="ཀ",E.kh="ཁ",E.g="ག",E.ng="ང",E.c="ཅ",E.ch="ཆ",E.j="ཇ",E.ny="ཉ",E.t="ཏ",E.th="ཐ",E.d="ད",E.n="ན",E.p="པ",E.ph="ཕ",E.b="བ",E.m="མ",E.ts="ཙ",E.tsh="ཚ",E.dz="ཛ",E.w="ཝ",E.zh="ཞ",E.z="ཟ",E["'"]="འ",E.y="ཡ",E.r="ར",E.l="ལ",E.sh="ཤ",E.s="ས",E.h="ཧ",E.a="ཨ",E["'"]="འ",E[".k"]="ཀ",E[".kh"]="ཁ",E[".g"]="ག",E[".ng"]="ང",E[".c"]="ཅ",E[".ch"]="ཆ",E[".j"]="ཇ",E[".ny"]="ཉ",E[".t"]="ཏ",E[".th"]="ཐ",E[".d"]="ད",E[".n"]="ན",E[".p"]="པ",E[".ph"]="ཕ",E[".b"]="བ",E[".m"]="མ",E[".ts"]="ཙ",E[".tsh"]="ཚ",E[".dz"]="ཛ",E[".w"]="ཝ",E[".zh"]="ཞ",E[".z"]="ཟ",E[".'"]="འ",E[".y"]="ཡ",E[".r"]="ར",E[".l"]="ལ",E[".sh"]="ཤ",E[".s"]="ས",E[".h"]="ཧ",E[".a"]="ཨ",E[".'"]="ཨ",E.ka="ཀ",E.kha="ཁ",E.ga="ག",E.nga="ང",E.ca="ཅ",E.cha="ཆ",E.ja="ཇ",E.nya="ཉ",E.ta="ཏ",E.tha="ཐ",E.da="ད",E.na="ན",E.pa="པ",E.pha="ཕ",E.ba="བ",E.ma="མ",E.tsa="ཙ",E.tsha="ཚ",E.dza="ཛ",E.wa="ཝ",E.zha="ཞ",E.za="ཟ",E.ya="ཡ",E.ra="ར",E.la="ལ",E.sha="ཤ",E.sa="ས",E.ha="ཧ",E[".ka"]="ཀ",E[".kha"]="ཁ",E[".ga"]="ག",E[".nga"]="ང",E[".ca"]="ཅ",E[".cha"]="ཆ",E[".ja"]="ཇ",E[".nya"]="ཉ",E[".ta"]="ཏ",E[".tha"]="ཐ",E[".da"]="ད",E[".na"]="ན",E[".pa"]="པ",E[".pha"]="ཕ",E[".ba"]="བ",E[".ma"]="མ",E[".tsa"]="ཙ",E[".tsha"]="ཚ",E[".dza"]="ཛ",E[".wa"]="ཝ",E[".zha"]="ཞ",E[".za"]="ཟ",E[".ya"]="ཡ",E[".ra"]="ར",E[".la"]="ལ",E[".sha"]="ཤ",E[".sa"]="ས",E[".ha"]="ཧ",E.gh="གྷ",E["g+h"]="གྷ",E.dh="དྷ",E["d+h"]="དྷ",E.bh="བྷ",E["b+h"]="བྷ",E.dzh="ཛྷ",E["dz+h"]="ཛྷ",E.kSh="ཀྵ",E["k+Sh"]="ཀྵ",E.T="ཊ",E.Th="ཋ",E.D="ཌ",E.Dh="ཌྷ",E["D+h"]="ཌྷ",E.N="ཎ",E.Sh="ཥ",E.oM="ༀ",E["+W"]="ྺ",E["+Y"]="ྻ",E["+R"]="ྼ",E.H="ཿ",E.M="ཾ",E["~M"]="ྃ",E["~M'"]="ྂ",E["~?"]="྄",E["&"]="྅",E["+k"]="ྐ",E["+kh"]="ྑ",E["+g"]="ྒ",E["+gh"]="ྒྷ",E["+ng"]="ྔ",E["+c"]="ྕ",E["+ch"]="ྖ",E["+j"]="ྗ",E["+ny"]="ྙ",E["+th"]="ྠ",E["+n"]="ྞ",E["+t"]="ྟ",E["+d"]="ྡ",E["+dh"]="ྡྷ",E["+n"]="ྣ",E["+p"]="ྤ",E["+ph"]="ྥ",E["+b"]="ྦ",E["+bh"]="ྦྷ",E["+m"]="ྨ",E["+ts"]="ྩ",E["+tsh"]="ྪ",E["+dz"]="ྫ",E["+dzh"]="ྫྷ",E["+w"]="ྭ",E["+zh"]="ྮ",E["+z"]="ྯ",E["+a"]="ྰ",E["+'"]="ྰ",E["+y"]="ྱ",E["+r"]="ྲ",E["+l"]="ླ",E["+sh"]="ྴ",E["+s"]="ྶ",E["+h"]="ྷ",E["+A"]="ྸ",E["+ksh"]="ྐྵ",E["+.w"]="ྺ",E["+.y"]="ྻ",E["+.r"]="ྼ",E["+ka"]="ྐ",E["+kha"]="ྑ",E["+ga"]="ྒ",E["+gha"]="ྒྷ",E["+nga"]="ྔ",E["+ca"]="ྕ",E["+cha"]="ྖ",E["+ja"]="ྗ",E["+nya"]="ྙ",E["+tha"]="ྠ",E["+na"]="ྞ",E["+ta"]="ྟ",E["+da"]="ྡ",E["+dha"]="ྡྷ",E["+na"]="ྣ",E["+pa"]="ྤ",E["+pha"]="ྥ",E["+ba"]="ྦ",E["+bha"]="ྦྷ",E["+ma"]="ྨ",E["+tsa"]="ྩ",E["+tsha"]="ྪ",E["+dza"]="ྫ",E["+dzha"]="ྫྷ",E["+wa"]="ྭ",E["+zha"]="ྮ",E["+za"]="ྯ",E["+ya"]="ྱ",E["+ra"]="ྲ",E["+la"]="ླ",E["+sha"]="ྴ",E["+sa"]="ྶ",E["+ha"]="ྷ",E["+A"]="ྸ",E["+.wa"]="ྺ",E["+.ya"]="ྻ",E["+.ra"]="ྼ",E.i="ི",E.u="ུ",E.e="ེ",E.o="ོ",E.A="ཱ",E.I="ཱི",E.U="ཱུ",E["r-i"]="ྲྀ",E["l-i"]="ླྀ",E["-i"]="ྀ",E.ai="ཻ",E.au="ཽ",E["r-I"]="ཷ",E["l-I"]="ཹ",E["-I"]="ཱྀ",E[0]="༠",E[1]="༡",E[2]="༢",E[3]="༣",E[4]="༤",E[5]="༥",E[6]="༦",E[7]="༧",E[8]="༨",E[9]="༩",E["\n"]="",E[" "]="",E._=" ",E[" "]="་",E["*"]="༌",E["//"]="༎",E["/"]="།",E[";"]="༏",E["|"]="༑",E["!"]="༈",E[":"]="༔",E["£"]="༐",E["=="]="༒",E["="]="༴",E.x="྾",E["x."]="྿",E["o...."]="༓",E["...."]="༶",E.H1="༁",E.H2="༂",E.H3="༃",E["@"]="༄",E["#"]="༅",E.$="༆",E["%"]="༇",E.H4="༉",E.H5="༊",E.H6="࿐",E.H7="࿑",E["<"]="༺",E[">"]="༻",E["{"]="༼",E["}"]="༽",E.Ligatures={},E.Ligatures.rk="r+k",E.Ligatures.rg="r+g",E.Ligatures.rng="r+ng",E.Ligatures.rj="r+j",E.Ligatures.rny="r+ny",E.Ligatures.rt="r+t",E.Ligatures.rd="r+d",E.Ligatures.rn="r+n",E.Ligatures.rb="r+b",E.Ligatures.rm="r+m",E.Ligatures.rts="r+ts",E.Ligatures.rdz="r+dz",E.Ligatures.lk="l+k",E.Ligatures.lg="l+g",E.Ligatures.lng="l+ng",E.Ligatures.lc="l+c",E.Ligatures.lj="l+j",E.Ligatures.lt="l+t",E.Ligatures.ld="l+d",E.Ligatures.lp="l+p",E.Ligatures.lb="l+b",E.Ligatures.lh="l+h",E.Ligatures.sk="s+k",E.Ligatures.sg="s+g",E.Ligatures.sng="s+ng",E.Ligatures.sny="s+ny",E.Ligatures.st="s+t",E.Ligatures.sd="s+d",E.Ligatures.sn="s+n",E.Ligatures.sp="s+p",E.Ligatures.sb="s+b",E.Ligatures.sm="s+m",E.Ligatures.sts="s+ts",E.Ligatures.kw="k+w",E.Ligatures.khw="kh+w",E.Ligatures.gw="g+w",E.Ligatures.cw="c+w",E.Ligatures.nyw="ny+w",E.Ligatures.tw="t+w",E.Ligatures.dw="d+w",E.Ligatures.tsw="ts+w",E.Ligatures.tshw="tsh+w",E.Ligatures.zhw="zh+w",E.Ligatures.zw="z+w",E.Ligatures.rw="r+w",E.Ligatures.shw="sh+w",E.Ligatures.sw="s+w",E.Ligatures.hw="h+w",E.Ligatures.ky="k+y",E.Ligatures.khy="kh+y",E.Ligatures.gy="g+y",E.Ligatures.py="p+y",E.Ligatures.phy="ph+y",E.Ligatures.by="b+y",E.Ligatures.my="m+y",E.Ligatures.kr="k+r",E.Ligatures.khr="kh+r",E.Ligatures.gr="g+r",E.Ligatures.tr="t+r",E.Ligatures.thr="th+r",E.Ligatures.dr="d+r",E.Ligatures.pr="p+r",E.Ligatures.phr="ph+r",E.Ligatures.br="b+r",E.Ligatures.mr="m+r",E.Ligatures.shr="sh+r",E.Ligatures.sr="s+r",E.Ligatures.hr="h+r",E.Ligatures.kl="k+l",E.Ligatures.gl="g+l",E.Ligatures.bl="b+l",E.Ligatures.zl="z+l",E.Ligatures.rl="r+l",E.Ligatures.sl="s+l",E.Ligatures.rky="r+k+y",E.Ligatures.rgy="r+g+y",E.Ligatures.rmy="r+m+y",E.Ligatures.rgw="r+g+w",E.Ligatures.rtsw="r+ts+w",E.Ligatures.sky="s+k+y",E.Ligatures.sgy="s+g+y",E.Ligatures.spy="s+p+y",E.Ligatures.sby="s+b+y",E.Ligatures.smy="s+m+y",E.Ligatures.skr="s+k+r",E.Ligatures.sgr="s+g+r",E.Ligatures.snr="s+n+r",E.Ligatures.spr="s+p+r",E.Ligatures.sbr="s+b+r",E.Ligatures.smr="s+m+r",E.Ligatures.grw="g+r+w",E.Ligatures.drw="d+r+w",E.Ligatures.phyw="ph+y+w",E.Ligatures["~om"]="ༀ",E.Ligatures["~athung"]="༁",E.Ligatures["~namcheyma"]="༂",E.Ligatures["~tertsekma"]="༃",E.Ligatures["~dunma"]="༄",E.Ligatures["~kabma"]="༅",E.Ligatures["~pursheyma"]="༆",E.Ligatures["~tseksheyma"]="༇",E.Ligatures["~drulshey"]="༈",E.Ligatures["~kuryikgo"]="༉",E.Ligatures["~kashoyikgo"]="༊",E.Ligatures["~tsek"]="་",E.Ligatures["~tsektar"]="༌",E.Ligatures["~shey"]="།",E.Ligatures["~nyishey"]="༎",E.Ligatures["~tsekshey"]="༏",E.Ligatures["~nyitsekshey"]="༐",E.Ligatures["~rinchenpungshey"]="༑",E.Ligatures["~gyatramshey"]="༒",E.Ligatures["~dzutamelongchen"]="༓",E.Ligatures["~tertsek"]="༔",E.Ligatures["~cheta"]="༕",E.Ligatures["~lakta"]="༖",E.Ligatures["~trachencharta"]="༗",E.Ligatures["~kyupa"]="༘",E.Ligatures["~dongtsu"]="༙",E.Ligatures["~dekachig"]="༚",E.Ligatures["~dekanyi"]="༛",E.Ligatures["~dekasum"]="༜",E.Ligatures["~denachig"]="༝",E.Ligatures["~denanyi"]="༞",E.Ligatures["~dekadena"]="༟",E.Ligatures["~duta"]="༴",E.Ligatures["~ngezungnyida"]="༵",E.Ligatures["~dzutashimigchen"]="༶",E.Ligatures["~ngezunggorta"]="༷",E.Ligatures["~chego"]="༸",E.Ligatures["~tsatru"]="༹",E.Ligatures["~gugtayun"]="༺",E.Ligatures["~gugtaye"]="༻",E.Ligatures["~angkangyun"]="༼",E.Ligatures["~angkangye"]="༽",E.Ligatures["~yartse"]="༾",E.Ligatures["~martse"]="༿",E.Ligatures["~kuruka"]="྾",E.Ligatures["~kurukashimikchen"]="྿",E.Ligatures["~HEAVY"]="࿀",E.Ligatures["~LIGHT"]="࿁",E.Ligatures["~CANGTE"]="࿂",E.Ligatures["~SBUB"]="࿃",E.Ligatures["~drilbu"]="࿄",E.Ligatures["~dorje"]="࿅",E.Ligatures["~pemaden"]="࿆",E.Ligatures["~dorjegyadram"]="࿇",E.Ligatures["~phurba"]="࿈",E.Ligatures["~norbu"]="࿉",E.Ligatures["~norbunyikhyi"]="࿊",E.Ligatures["~norbusumkhyi"]="࿋",E.Ligatures["~norbushikhyi"]="࿌",E.Ligatures["~denasum"]="࿏",E.toUnicode=function(e){function t(e){return e.replace(/[-[\]{}()*+?.,\\^$|#\s]/g,"\\$&")}function r(e,t){return e.length>t.length?-1:e.length<t.length?1:0}function n(e){var t=[];for(var n in e)e.hasOwnProperty(n)&&"string"==typeof e[n]&&t.push(n);return t.sort(r),t}function i(e,r,n){for(var i=e,a=0;a<r.length;a++){var s=t(r[a]);i=i.replace(new RegExp(s,"g"),n[r[a]])}return i}function a(e){var t="";return t=i(i(e,s,E.Ligatures),l,E)}var s=n(E.Ligatures),l=n(E);return function(e){for(var t="",r=e.split(" "),n=0;n<r.length;n++)t+=a(r[n])+(n===r.length-1?"":E[" "]);return t}(e)};var M=new Map;M.addAll=function(e){for(var t in e)if(e.hasOwnProperty(t)){var r=t.split(" ");if(r.length>0){var n=M;for(var i in r){var a=r[i];n.has(a)||n.set(a,new Map),n=n.get(a)}n.set(t,e[t])}}},M.findWord=function(e){if(void 0!==e){" "===e[e.length-1]&&(e=e.substring(0,e.length-1));var t=e.split(" "),r=M;for(var n in t){var i=t[n];if(!r.has(i)){r=void 0;break}r=r.get(i)}return void 0===r?void 0:r.has(e)?r.get(e):r}},M.validUntilSyllableIndex=function(e){if(void 0!==e){var t=e.split(" "),r=!1,n="",i=0;for(var a in t){if(n+=t[a]+" ",void 0===M.findWord(n))break;if(r=!0,i++,i===t.length)break}return r?i:-1}};var j=L.subclassDialect(H),x=L.inline_until_char,_=v.mk_block,I=E;j.isMarkUp=!1,j.dictionary=M,j.dictionaryURL="http://leannenorthrop.github.io/classical-tibetan/resource/dictionary/index.html#",j.inline["::"]=function(e){var t=e.match(/(::)((\s|\S|\W|\w)*?)(\1)/);if(t&&t[2]){var r=I.toUnicode(t[2]);return[2*t[1].length+t[2].length,["uchen",{"class":"uchen",wylie:t[2]},r]]}return[2,"::"]},j.markup=function(e){for(var t=[],r=e.split(" "),n=0;n<r.length;n++){var i=r[n];if(" "!==i&&""!==i){for(var a="",s=0;9>s;s++)n+s<r.length&&(a+=r[n+s]+" ");var l=p(a),h=j.dictionary.validUntilSyllableIndex(l),u=!1;if(-1!==h){var c=l.split(" ").splice(0,h);n+=h===c.length?h-1:h;var o=c.join(" ")+" ",g=a.split(" ").splice(0,h);g=g.join(" ");var f=d(g)?g:g+" ",v=j.dictionary.findWord(o);if(void 0!==v&&v.hasOwnProperty("en")){var b=["uchen_syllable",{"class":"syllables word"}];b.push(["uchen",{"class":"uchen"},["a",{href:j.dictionaryURL+encodeURIComponent(c.join(" ")+".")},I.toUnicode(f)]]),b.push(["uchen_wylie",{"class":"wylie"},o]),b.push(["uchen_english",{"class":"english"},v.en]),t.push(b),u=!0}}if(!u){i=d(i)?i:i+" ";var b=["uchen_syllable",{"class":"syllables"}];b.push(["uchen",{"class":"uchen"},I.toUnicode(i)]),b.push(["uchen_wylie",{"class":"wylie"},i]),b.push(["uchen_english",{"class":"english"}," "]),t.push(b)}}}return t},j.block.wylie=function(e,t){var r=/^(:::\n*)([\s\S\W\w\n\r]*?)(\1)/,n=/^:::\n*/,i=/([\s\S\W\w\n\r]*?)(\n*:::)(.*)/;if(e.match(n)){var a="",s=e.match(r);if(s)a=s[2];else for(var l=!1,h=e.replace(":::","");t.length&&!l;)l=h.match(i),a+=l?l[1]:h,h=l?"":t.shift();a=f(a,"\n","");var u=[];if(j.isMarkUp)u=j.markup(a);else{var c=["uchen_syllable",{"class":"syllables"}];c.push(["uchen",{"class":"uchen"},I.toUnicode(a)]),u.push(c)}return a.length>0?[["uchen_block",{"class":"uchen_text",wylie:a},u]]:[]}},k.dialects.ExtendedWylie=j,k.buildBlockOrder(k.dialects.ExtendedWylie.block),k.buildInlinePatterns(k.dialects.ExtendedWylie.inline);var x=L.inline_until_char,_=v.mk_block,m=v.forEach,I=E,A={isMarkUp:!1,block:{wylie:function N(e,t){var r=/^(:::\n*)([\s\S\W\w\n\r]*?)(\1)/,n=/^:::\n*/,i=/([\s\S\W\w\n\r]*?)(\n*:::)(.*)/;if(e.match(n)){var N="",a=e.match(r);if(a)N=a[2];else for(var s=!1,l=e.replace(":::","");t.length&&!s;)s=l.match(i),N+=s?s[1]:l,l=s?"":t.shift();if(this.isMarkUp){var h=j.markup(N);return N.length>0?[["uchen_block",{"class":"uchen_text",wylie:N},h]]:[]}return N.length>0?[["uchen_block",{"class":"uchen",wylie:N},I.toUnicode(N)]]:[]}},para:function(e){return[["para"].concat(this.processInline(e))]}},inline:{__oneElement__:function(e,t,r){var n,i;t=t||this.dialect.inline.__patterns__;var a=new RegExp("([\\s\\S]*?)("+(t.source||t)+")");if(n=a.exec(e),!n)return[e.length,e];if(n[1])return[n[1].length,n[1]];var i;return n[2]in this.dialect.inline&&(i=this.dialect.inline[n[2]].call(this,e.substr(n.index),n,r||[])),i=i||[n[2].length,n[2]]},__call__:function(e,t){function r(e){"string"==typeof e&&"string"==typeof i[i.length-1]?i[i.length-1]+=e:i.push(e)}for(var n,i=[];e.length>0;)n=this.dialect.inline.__oneElement__.call(this,e,t,i),e=e.substr(n.shift()),m(n,r);return i},__escape__:/^\\[\\`\*_{}<>\[\]()#\+.!\-]/,"\\":function(e){return this.dialect.inline.__escape__.exec(e)?[2,e.charAt(1)]:[1,"\\"];
},"  \n":function(){return[3,["linebreak"]]}}};A.inline["::"]=function(e){var t=e.match(/(::)((\s|\S|\W|\w)*?)(\1)/);if(t&&t[2]){var r=I.toUnicode(t[2]);return[2*t[1].length+t[2].length,["uchen",{"class":"uchen",wylie:t[2]},r]]}return[2,"::"]},k.dialects.Wylie=A,k.buildBlockOrder(k.dialects.Wylie.block),k.buildInlinePatterns(k.dialects.Wylie.inline),e.Markdown=k,e.parse=k.parse,e.toHTML=k.toHTML,e.toHTMLTree=k.toHTMLTree,e.renderJsonML=k.renderJsonML,e.DialectHelpers=L}(function(){return window.markdown={},window.markdown}());